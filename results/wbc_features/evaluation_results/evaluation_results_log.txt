WBC Classification Evaluation
Started at: 2025-12-20 19:25:54
============================================================
Loaded 411 labels from CSV
Columns: ['Unnamed: 0', 'Image', 'Category']
Sample data:
   Unnamed: 0  Image    Category
0         NaN      0  NEUTROPHIL
1         NaN      1  NEUTROPHIL
2         NaN      2  NEUTROPHIL
3         NaN      3  NEUTROPHIL
4         NaN      4  NEUTROPHIL

Evaluating all images...
============================================================
Processed 50/411 images...
Processed 100/411 images...
Processed 150/411 images...
Processed 200/411 images...
Processed 250/411 images...
Processed 300/411 images...
Processed 350/411 images...
Processed 400/411 images...

Completed processing 411 images.

============================================================
EVALUATION REPORT
============================================================

Overall Accuracy: 64.94%
Correct: 213/328

------------------------------------------------------------
Per-Class Accuracy:
------------------------------------------------------------
  BASOPHIL            :   0.00%
  EOSINOPHIL          :  43.42%
  LYMPHOCYTE          :  76.47%
  MONOCYTE            :  14.29%
  NEUTROPHIL          :  77.84%

------------------------------------------------------------
Processing Status:
------------------------------------------------------------
  correct                  :  213
  image_not_found          :   47
  incorrect                :  115
  no_ground_truth          :    1
  no_wbc_detected          :   35

============================================================

============================================================
MISCLASSIFICATION ANALYSIS
============================================================

Common Misclassification Patterns:
------------------------------------------------------------
  NEUTROPHIL → EOSINOPHIL       :  34 cases
  EOSINOPHIL → NEUTROPHIL       :  28 cases
  EOSINOPHIL → BASOPHIL         :  14 cases
  LYMPHOCYTE → BASOPHIL         :   6 cases
  MONOCYTE → BASOPHIL           :   6 cases
  NEUTROPHIL → BASOPHIL         :   6 cases
  MONOCYTE → NEUTROPHIL         :   6 cases
  MONOCYTE → EOSINOPHIL         :   4 cases
    Images: [15, 309, 318, 323]
  NEUTROPHIL → LYMPHOCYTE       :   3 cases
    Images: [34, 43, 212]
  BASOPHIL → NEUTROPHIL         :   2 cases
    Images: [8, 171]
  LYMPHOCYTE → EOSINOPHIL       :   2 cases
    Images: [21, 55]
  MONOCYTE → LYMPHOCYTE         :   2 cases
    Images: [83, 127]
  EOSINOPHIL → MONOCYTE         :   1 cases
    Images: [9]
  BASOPHIL → LYMPHOCYTE         :   1 cases
    Images: [132]

============================================================
THRESHOLD ADJUSTMENT SUGGESTIONS
============================================================

NEUTROPHIL:
----------------------------------------
  Sample count: 194

  Feature Statistics:
    Circularity:      0.332 ± 0.162 (range: 0.081 - 0.728)
    Solidity:         0.727 ± 0.130 (range: 0.351 - 0.962)
    Num Lobes:        2.2 ± 1.6 (range: 1 - 9)
    CN Ratio:         2.576 ± 0.892 (range: 0.982 - 4.908)
    Mean Hue:         114.2 ± 19.1 (range: 55.7 - 144.3)
    Texture Variance: 105.7 ± 32.5

  Classification accuracy for this type: 77.8% (151/194)
  Often misclassified as: {'EOSINOPHIL': np.int64(34), 'BASOPHIL': np.int64(6), 'LYMPHOCYTE': np.int64(3)}

BASOPHIL:
----------------------------------------
  Sample count: 3

  Feature Statistics:
    Circularity:      0.435 ± 0.252 (range: 0.169 - 0.671)
    Solidity:         0.759 ± 0.245 (range: 0.478 - 0.932)
    Num Lobes:        2.7 ± 2.1 (range: 1 - 5)
    CN Ratio:         1.980 ± 1.548 (range: 0.953 - 3.761)
    Mean Hue:         105.7 ± 27.9 (range: 78.2 - 134.1)
    Texture Variance: 114.5 ± 61.2

  Classification accuracy for this type: 0.0% (0/3)
  Often misclassified as: {'NEUTROPHIL': np.int64(2), 'LYMPHOCYTE': np.int64(1)}

EOSINOPHIL:
----------------------------------------
  Sample count: 76

  Feature Statistics:
    Circularity:      0.364 ± 0.155 (range: 0.099 - 0.751)
    Solidity:         0.748 ± 0.120 (range: 0.374 - 0.945)
    Num Lobes:        1.7 ± 1.5 (range: 1 - 8)
    CN Ratio:         1.869 ± 0.568 (range: 0.848 - 3.607)
    Mean Hue:         96.8 ± 19.2 (range: 48.7 - 146.1)
    Texture Variance: 81.6 ± 24.9

  Classification accuracy for this type: 43.4% (33/76)
  Often misclassified as: {'NEUTROPHIL': np.int64(28), 'BASOPHIL': np.int64(14), 'MONOCYTE': np.int64(1)}

MONOCYTE:
----------------------------------------
  Sample count: 21

  Feature Statistics:
    Circularity:      0.249 ± 0.175 (range: 0.049 - 0.661)
    Solidity:         0.643 ± 0.167 (range: 0.393 - 0.936)
    Num Lobes:        3.9 ± 3.0 (range: 1 - 13)
    CN Ratio:         2.263 ± 1.224 (range: 0.564 - 4.777)
    Mean Hue:         87.5 ± 20.6 (range: 51.9 - 126.8)
    Texture Variance: 80.4 ± 27.5

  Classification accuracy for this type: 14.3% (3/21)
  Often misclassified as: {'BASOPHIL': np.int64(6), 'NEUTROPHIL': np.int64(6), 'EOSINOPHIL': np.int64(4), 'LYMPHOCYTE': np.int64(2)}

LYMPHOCYTE:
----------------------------------------
  Sample count: 34

  Feature Statistics:
    Circularity:      0.640 ± 0.188 (range: 0.085 - 0.795)
    Solidity:         0.894 ± 0.149 (range: 0.315 - 0.976)
    Num Lobes:        1.3 ± 0.9 (range: 1 - 5)
    CN Ratio:         1.706 ± 0.876 (range: 0.905 - 5.719)
    Mean Hue:         65.5 ± 12.4 (range: 39.1 - 97.4)
    Texture Variance: 55.6 ± 6.8

  Classification accuracy for this type: 76.5% (26/34)
  Often misclassified as: {'BASOPHIL': np.int64(6), 'EOSINOPHIL': np.int64(2)}

Confusion matrix saved to ../results/wbc_features/evaluation_results/confusion_matrix.png
Feature distributions saved to ../results/wbc_features/evaluation_results/feature_distributions.png

Detailed results exported to ../results/wbc_features/evaluation_results/wbc_table.csv

============================================================
Evaluation complete!
Finished at: 2025-12-20 19:26:01
Log file saved to: ../results/wbc_features/evaluation_results/evaluation_results_log.txt
============================================================
